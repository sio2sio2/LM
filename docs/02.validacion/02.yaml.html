




<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>2.2. JSON Schema &#8212; documentación de Lenguajes de Marcas - rolling</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/cloud.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" href="../_static/general.css" type="text/css" />
    <link rel="stylesheet" href="../_static/particular.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text:400,i,b,bi|Open+Sans:400,i,b,bi|Roboto+Mono:400,i,b,bi&amp;display=swap" type="text/css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/design-tabs.js"></script>

    
    
     
        <script src="../_static/jquery.cookie.js"></script>
    

    
     
        <script src="../_static/cloud.base.js"></script>
    

    
     
        <script src="../_static/cloud.js"></script>
    

    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="2.3. Ejercicios propuestos" href="03.ej.html" />
    <link rel="prev" title="2.1. DTD" href="01.dtdxml.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="03.ej.html" title="2.3. Ejercicios propuestos"
             accesskey="N">siguiente</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="01.dtdxml.html" title="2.1. DTD"
             accesskey="P">anterior</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">documentación de Lenguajes de Marcas - rolling</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">2. </span>Validación</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.2. </span><abbr title="JavaScript Object Notation">JSON</abbr> Schema</a></li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="json-schema">
<span id="id1"></span><h1><span class="section-number">2.2. </span><abbr title="JavaScript Object Notation">JSON</abbr> Schema<a class="headerlink" href="#json-schema" title="Enlace permanente a este encabezado">¶</a></h1>
<p>La definición de gramáticas para documentos <abbr title="JavaScript Object Notation">JSON</abbr> no está tan madura como
para documentos <abbr title="eXtensible  Markup Language">XML</abbr>. Hay distintas alternativas, de las cuales la más
extendida es <a class="reference external" href="https://json-schema.org/">JSON Schema</a>, que puede utilizarse tanto en la definición de
documentos <abbr title="JavaScript Object Notation">JSON</abbr> como de documentos <abbr title="YAML Ain't Markup Language">YAML</abbr>.</p>
<p>Dedicaremos el epígrafe a describir cómo se utiliza <a class="reference external" href="https://json-schema.org/">JSON Schema</a>.</p>
<section id="preliminares">
<h2><span class="section-number">2.2.1. </span>Preliminares<a class="headerlink" href="#preliminares" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Antes de entrar a definir su sintaxis es conveniente saber algunos aspectos de
<a class="reference external" href="https://json-schema.org/">JSON Schema</a>:</p>
<ul class="simple">
<li><p>Define gramáticas de documentos <abbr title="JavaScript Object Notation">JSON</abbr> (o <abbr title="YAML Ain't Markup Language">YAML</abbr>) usando un formato <abbr title="JavaScript Object Notation">JSON</abbr>.</p></li>
<li><p>No tiene tanta madurez como la definición de gramáticas para <abbr title="eXtensible  Markup Language">XML</abbr>.</p></li>
<li><p>Existen nueve versiones del borrador de su especificación: la siete primeras
nombradas mediante un ordinal (<em>Draft 1</em>, <em>Draft  2</em>, etc.) y las dos últimas
con la fecha en que se publicaron: <em>2019-09</em> y <a class="reference external" href="https://json-schema.org/specification.html">2020-12</a>. En consecuencia a fecha de
redacción de este documento el borrador más reciente es el <em>2020-12</em>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Obviamente, si se pretende definir una gramática de <abbr title="YAML Ain't Markup Language">YAML</abbr> con <em>JSON
Schema</em>, sólo podremos escribir en el <abbr title="YAML Ain't Markup Language">YAML</abbr> aquello que puede escribirse en
un <abbr title="JavaScript Object Notation">JSON</abbr>. Por ejemplo, no podremos usar <code class="docutils literal notranslate"><span class="pre">undefined</span></code> o deberemos hacer que
todas las claves sean cadenas, a pesar de que <abbr title="YAML Ain't Markup Language">YAML</abbr> no tiene esas
limitaciones.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Como la especificación es muy árida, ilustraremos aquí los aspectos
más básicos, pero para mayor profundización puede echarse mano de la guía
oficial <a class="reference external" href="https://json-schema.org/understanding-json-schema">Understanding JSON Schema</a>.</p>
</div>
<section id="ejemplo">
<span id="json-schema-ejemplo"></span><h3><span class="section-number">2.2.1.1. </span>Ejemplo<a class="headerlink" href="#ejemplo" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Tomemos la versión <abbr title="JavaScript Object Notation">JSON</abbr> del <a class="reference internal" href="../01.intro/02a.serial.html#json-ejemplo-inicial"><span class="std std-ref">ejemplo introductorio</span></a>:</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Casilleros<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;centro&quot;</span><span class="p">:</span><span class="w">  </span><span class="s2">&quot;IES Pepe Botella&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;profesores&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Luis&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Luis&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Márquez Vázquez&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Educación Física&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cristina&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;María  Cristina&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Prieto Monagas&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biología y Geología&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Manolo&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Manuel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Páez Robledo&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Matemáticas&quot;</span>

<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;casillero&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lucía&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lucía&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Gálvez Ruiz&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Inglés&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;casillero&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">28</span><span class="p">],</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Migue&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Miguel Ángel&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Campos Sanchez&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Historia&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">81</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;casillero&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vero&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Verónica&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Martín Díaz&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Biología&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">86</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;sustituye&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Roberto&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Roberto&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Mínguez Torralbo&quot;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details><p>Este <abbr title="JavaScript Object Notation">JSON</abbr> se ajusta al siguiente esquema:</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Gramática de Casilleros con JSON Schema<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casilleros.schema.json&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Casilleros&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Asignación de casilleros a profesores&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;centro&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre del centro de enseñanza&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;profesores&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Relación de profesores&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Identificador único del profesor&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>

<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;sustituye&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Identificador del profesor al que sustituye&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;casillero&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                     </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">                     </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                  </span><span class="p">},</span>
<span class="w">                  </span><span class="nt">&quot;uniqueItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;apelativo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;descripcion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre por el que se le conoce&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;descripcion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre de pila&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;apellidos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;descripcion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Apellidos&quot;</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="nt">&quot;departamento&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">                  </span><span class="nt">&quot;descripcion&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Departamento didáctico al que pertenece&quot;</span>
<span class="w">               </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;nombre&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;apellidos&quot;</span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">               </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;departamento&quot;</span><span class="p">],</span>
<span class="w">                  </span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sustituye&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">               </span><span class="p">},</span>
<span class="w">               </span><span class="p">{</span>
<span class="w">                  </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;sustituye&quot;</span><span class="p">],</span><span class="w"> </span>
<span class="w">                  </span><span class="nt">&quot;allOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                     </span><span class="p">{</span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;departamento&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}},</span>
<span class="w">                     </span><span class="p">{</span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;casillero&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}}</span>
<span class="w">                  </span><span class="p">]</span>
<span class="w">               </span><span class="p">}</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;minItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;centro&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;profesores&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details><p>Como puede verse, el documento es en sí un documento <abbr title="JavaScript Object Notation">JSON</abbr> y tiene un modo algo
particular (y nada intuitivo) de expresar una ocurrencia de nodos, que se habría
resuelto muy fácilmente con <abbr title="Document Type Definition">DTD</abbr>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(id, apelativo?, nombre, apellidos, ((departamento, casillero?)|sustituye))
</pre></div>
</div>
</section>
<section id="validacion">
<h3><span class="section-number">2.2.1.2. </span>Validación<a class="headerlink" href="#validacion" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Antes de empezar, no obstante, es conveniente saber cómo validar:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://jschon.dev/">Validador online</a>, que tiene el inconveniente de que
no pueden subirse archivos locales.</p></li>
<li><p>La orden <strong class="command">jsonschema</strong>, disponible a través del paquete
<a class="reference external" href="https://packages.debian.org/stable/python3-jsonschema">python3-jsonschema</a> de las distribuciones basadas en <em>Debian</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>jsonschema<span class="w"> </span>-i<span class="w"> </span>casilleros.json<span class="w"> </span>casilleros.schema.json
</pre></div>
</div>
<p>La orden no mostrará salida (y devolverá un <strong>0</strong> al sistema) si el documento
respeta la gramática definida en el esquema. En principio, sólo es capaz de
validar documentos <abbr title="JavaScript Object Notation">JSON</abbr>, pero para validar <abbr title="YAML Ain't Markup Language">YAML</abbr> puede hacerse una
<a class="reference external" href="https://mikefarah.gitbook.io/yq/v/v3.x/usage/convert">conversión previa a JSON con yq</a>.</p>
</li>
<li><p>El todo terreno <a class="reference external" href="https://code.visualstudio.com">Visual Studio Code</a>, que sirve para validar tanto <abbr title="JavaScript Object Notation">JSON</abbr>
como <abbr title="YAML Ain't Markup Language">YAML</abbr>. Sin embargo, requiere en ambos casos configuración adicional:</p>
<dl>
<dt><abbr title="JavaScript Object Notation">JSON</abbr></dt><dd><p>El soporte es nativo, como ya vimos, pero requiere configuración. En
<code class="docutils literal notranslate"><span class="pre">File&gt;Preferences&gt;Settings</span></code> (o, simplemente, <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">,</kbd></kbd>) debemos
consultar la extensión para <abbr title="JavaScript Object Notation">JSON</abbr>, una de cuyas configuraciones es <code class="docutils literal notranslate"><span class="pre">JSON:</span>
<span class="pre">Schemas</span></code>:</p>
<img alt="../_images/vs-json-schemas.png" src="../_images/vs-json-schemas.png" />
<p>Al pinchar en la edición se nos abrirá el archivo de configuración
<code class="file docutils literal notranslate"><span class="pre">settings.json</span></code> que nos permite relacionar archivos <abbr title="JavaScript Object Notation">JSON</abbr> con los
esquemas que usan. Por ejemplo:</p>
<img alt="../_images/vs-json-settings.png" src="../_images/vs-json-settings.png" />
<p>Este es un proyecto abierto como una carpeta en que el esquema está en la
propia carpeta raíz y se ha definido la relación entre archivos <abbr title="JavaScript Object Notation">JSON</abbr> y
esquemas así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;json.schemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;fileMatch&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;casilleros*.json&quot;</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/casilleros.schema.json&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>La propiedad <code class="docutils literal notranslate"><span class="pre">json.schemas</span></code> es una secuencia, cada uno de cuyos elementos
es un objeto que serve para referir un esquema distinto. En él, <code class="docutils literal notranslate"><span class="pre">fileMatch</span></code>
es la lista de archivos que siguen el esquema, mientras que <code class="docutils literal notranslate"><span class="pre">url</span></code> indica la
<abbr title="Uniform Resource Locator">URL</abbr> (que no propiamente la ruta) del esquema. Podríamos haber escrito una
<abbr title="Uniform Resource Locator">URL</abbr> absoluta (con file:<cite>file:///etc.</cite>), pero dado que la <abbr title="Uniform Resource Locator">URL</abbr> base es la
propia carpeta del proyecto, hemos preferido una <abbr title="Uniform Resource Locator">URL</abbr> relativa.</p>
</dd>
<dt><abbr title="YAML Ain't Markup Language">YAML</abbr></dt><dd><p>Como ya se indicó al tratar su sintaxis, requiere instalar  la <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-yaml">extensión
para YAML</a> y,
como en el caso anterior, relacionar el archivo con su esquema correspondiente.
La configuración es muy semejante, salvo que se encuentra dentro de la
extensión <abbr title="YAML Ain't Markup Language">YAML</abbr>, y que el <abbr title="JavaScript Object Notation">JSON</abbr> de configuración no es exactamente
igual:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;yaml.schemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;./casilleros.schema.json&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casilleros*.yaml&quot;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este caso, <code class="docutils literal notranslate"><span class="pre">yaml.schemas</span></code> es un objeto y cada objeto tiene como claves
la ruta al esquema (no una <abbr title="Uniform Resource Locator">URL</abbr> como antes) y como valor el archivo o los
archivos que se rigen por el esquema. Cuando son varios, es necesario usar
una secuencia:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;yaml.schemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;./casilleros.schema.json&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;casilleros*.yaml&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;*casilleros.yaml&quot;</span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="sintaxis-basica">
<h2><span class="section-number">2.2.2. </span>Sintaxis básica<a class="headerlink" href="#sintaxis-basica" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Ya sabemos que un documento <abbr title="JavaScript Object Notation">JSON</abbr> está constituido por nodos, cada uno de los
cuales tiene un tipo. Construir el esquema de un documento <abbr title="JavaScript Object Notation">JSON</abbr> consiste
básicamente en definir los subesquemas que describen cada uno de sus nodos<a class="footnote-reference brackets" href="#id8" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>No nos proponemos profundizar mucho, ya que tienen algo más de complejidad que
los <a class="reference internal" href="01.dtdxml.html#dtd"><span class="std std-ref">DTD</span></a>.</p>
<section id="esquema-del-nodo-raiz">
<h3><span class="section-number">2.2.2.1. </span>Esquema del nodo raíz<a class="headerlink" href="#esquema-del-nodo-raiz" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Antes de analizar cómo se define el esquema de cada nodo en general, es preciso
indicar las particularidades del nodo raíz.  Un nodo raíz tiene este aspecto:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">{</span>
<span class="w">   </span><span class="s">&quot;$schema&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;URN-del-esquema-JSON-que-se-usa&quot;</span><span class="p p-Indicator">,</span>
<span class="w">   </span><span class="s">&quot;$id&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;URL-del-documento&quot;</span><span class="p p-Indicator">,</span>

<span class="w">   </span><span class="c1"># Descripción del nodo</span>
<span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>donde:</p>
<dl class="simple" id="json-schema-schema">
<dt><code class="docutils literal notranslate"><span class="pre">$schema</span></code></dt><dd><p>Es la <abbr title="Uniform Resource Name">URN</abbr> de versión de <a class="reference external" href="https://json-schema.org/">JSON Schema</a> que hemos usado en el archivo. La de
la última (<em>2020-12</em>) es la que hemos expresado en el ejemplo.</p>
</dd>
</dl>
<dl id="json-schema-id">
<dt><code class="docutils literal notranslate"><span class="pre">$id</span></code></dt><dd><p>Es la <abbr title="Uniform Resource Locator">URL</abbr> donde se encuentra el archivo con el esquema que estamos
definiendo. Tiene utilidad cuando el esquema necesita <a class="reference internal" href="#json-schema-ref"><span class="std std-ref">referir
subesquemas que se encuentran definidos en otros archivos</span></a>. Si no
es el caso, puede dejarse sin definir esta propiedad o indicar, simplemente,
el nombre del archivo.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En nuestro ejemplo, no hemos usado una <abbr title="Uniform Resource Locator">URL</abbr> porque no estamos
escribiendo un esquema público para uso general.</p>
</div>
</dd>
</dl>
<p>El resto de parejas clave/valor que pueden encontrarse en la raíz describen qué
contiene el nodo raíz y, por tanto, serán las claves típicas de un
<a class="reference internal" href="#subesq-nodo"><span class="std std-ref">subesquema de nodo</span></a>.  Eso sí, como el nodo raíz de un
documento <abbr title="JavaScript Object Notation">JSON</abbr> sólo puede ser un mapa o una secuencia, estas claves típicas
sólo podrán ser las típicas de un nodo secuencia (<a class="reference internal" href="#json-schema-array"><span class="std std-ref">array</span></a>) o de un nodo mapa (<a class="reference internal" href="#json-schema-map"><span class="std std-ref">map</span></a>). En el
ejemplo, el nodo raíz es un mapa por lo que el esquema inicial podría quedar en
principio como:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;casilleros.schema.json&quot;</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Casilleros&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Asignación de casilleros a profesores&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>

<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ya que cualquier subesquema de nodo nos permite añadir un título y una
descripción y el nodo mapa en particular nos pide al menos indicar cuáles son
las propiedades (o sea, las parejas clave/valor) lícitas, para lo cual debemos
usar la propiedad <code class="docutils literal notranslate"><span class="pre">properties</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Dado que en principio no es obligatorio definir todas las propiedades
del objeto, un esquema tan simple como éste nos validará el documento <abbr title="JavaScript Object Notation">JSON</abbr>.
Bien es cierto que sirve de poco, porque la única limitación que introduce es
que el nodo raíz es un mapa y no secuencia.</p>
</div>
</section>
<section id="subesquemas-de-nodo">
<span id="subesq-nodo"></span><h3><span class="section-number">2.2.2.2. </span>Subesquemas de nodo<a class="headerlink" href="#subesquemas-de-nodo" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Cómo se describa un nodo, depende fundamentalmente de su tipo (no es lo mismo
describir qué debe cumplir un nodo numérico que un nodo secuencia, por ejemplo).
Ahora bien, hay propiedades comunes a todos los nodos.</p>
<dl class="simple" id="json-schema-title">
<dt><code class="docutils literal notranslate"><span class="pre">title</span></code></dt><dd><p>permite indicar un título para el nodo.</p>
</dd>
</dl>
<dl class="simple" id="json-schema-description">
<dt><code class="docutils literal notranslate"><span class="pre">description</span></code></dt><dd><p>permite describir qué contiene el nodo de una manera más prolija.</p>
</dd>
</dl>
<dl class="simple" id="json-schema-type">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>indica el tipo de dato (<a class="reference internal" href="../01.intro/02a.serial.html#json-numero"><span class="std std-ref">integer</span></a>, <a class="reference internal" href="../01.intro/02a.serial.html#json-numero"><span class="std std-ref">number</span></a>,
<a class="reference internal" href="../01.intro/02a.serial.html#json-cadena"><span class="std std-ref">string</span></a>, <a class="reference internal" href="../01.intro/02a.serial.html#json-nulo"><span class="std std-ref">null</span></a>, <a class="reference internal" href="../01.intro/02a.serial.html#json-booleano"><span class="std std-ref">boolean</span></a>, <a class="reference internal" href="../01.intro/02a.serial.html#json-array"><span class="std std-ref">array</span></a> u <a class="reference internal" href="../01.intro/02a.serial.html#json-objeto"><span class="std std-ref">object</span></a>).</p>
</dd>
</dl>
<dl class="simple" id="json-schema-default">
<dt><code class="docutils literal notranslate"><span class="pre">default</span></code></dt><dd><p>permite indicar el valor predeterminado, en caso de que el nodo no aparezca.</p>
</dd>
</dl>
<dl id="json-schema-enum">
<dt><code class="docutils literal notranslate"><span class="pre">enum</span></code></dt><dd><p>define una lista de valores válidos para el nodo, fuera de los cuales debe
producirse un error. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Este es un entero con sólo unos pocos valores válidos&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">55</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>es un subesquema que indica que el nodo es un entero con sólo tres posibles
valores válidos.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En realidad, si especificamos cuáles son todos los valores válidos,
ya no es necesario especificar el tipo, así que es mejor definir así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Este es un entero con sólo unos pocos valores válidos&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">55</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</dd>
</dl>
<dl id="json-schema-const">
<dt><code class="docutils literal notranslate"><span class="pre">const</span></code></dt><dd><p>define el único valor válido para el nodo por lo que equivale a un <code class="docutils literal notranslate"><span class="pre">enum</span></code>
cuya lista sólo contenga un valor.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Este es un entero con sólo unos pocos valores válidos&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;const&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<p>Estas propiedades que acabamos de enumerar son aquellas que podemos encontrar
sea cual sea el tipo del nodo. Ahora bien, ¿cuáles son específicas?</p>
<span id="json-schema-integer"></span><dl id="json-schema-number">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/numeric.html">numeric</a> (que comprende <a class="reference internal" href="../01.intro/02a.serial.html#json-numero"><span class="std std-ref">integer</span></a> y <a class="reference internal" href="../01.intro/02a.serial.html#json-numero"><span class="std std-ref">number</span></a>)</dt><dd><p>Tiene asociadas propiedades que no requieren demasiada explicación:</p>
<span id="json-schema-minimum"></span><dl class="simple" id="json-schema-exclusiveminimum">
<dt><code class="docutils literal notranslate"><span class="pre">minimum</span></code>/<code class="docutils literal notranslate"><span class="pre">exclusiveMinimum</span></code></dt><dd><p>define el valor mínimo (incluido y sin incluir respectivamente).</p>
</dd>
</dl>
<span id="json-schema-maximum"></span><dl class="simple" id="json-schema-exclusivemaximum">
<dt><code class="docutils literal notranslate"><span class="pre">maximum</span></code>/<code class="docutils literal notranslate"><span class="pre">exclusiveMaximum</span></code></dt><dd><p>define el valor máximo (incluido y sin incluir respectivamente).</p>
</dd>
</dl>
<dl class="simple" id="json-schema-multipleof">
<dt><code class="docutils literal notranslate"><span class="pre">multipleOf</span></code></dt><dd><p>fuerza a que el valor sea múltiplo del indicado.</p>
</dd>
</dl>
</dd>
</dl>
<dl id="json-schema-string">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/string.html">string</a></dt><dd><p>El tipo tiene también algunas propiedades particulares:</p>
<dl class="simple" id="json-schema-minlength">
<dt><code class="docutils literal notranslate"><span class="pre">minLength</span></code></dt><dd><p>define el número mínimo de caracteres que puede contener la cadena.</p>
</dd>
</dl>
<dl class="simple" id="json-schema-maxlength">
<dt><code class="docutils literal notranslate"><span class="pre">maxLength</span></code></dt><dd><p>define el número máximo de caracteres que puede contener la cadena.</p>
</dd>
</dl>
<dl id="json-schema-pattern">
<dt><code class="docutils literal notranslate"><span class="pre">pattern</span></code></dt><dd><p>define una <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/regular_expressions.html">expresión regular</a>
que se usará como patrón para comprobar la validez de la cadena. Las
expresiones regulares que define <a class="reference external" href="https://es.wikipedia.org/wiki/JavaScript">Javascript</a> son prácticamente los
patrones <abbr title="Extended Regular Expression">ERE</abbr> y <abbr title="Perl-Compatible Regular Expression">PCRE</abbr> que pueden consultarse <a class="reference external" href="https://sio2sio2.github.io/doc-linux/02.conbas/10.texto/01.regex.html#tipos-de-expresiones-regulares">en estos apuntes</a>.
Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Este dato sólo podrá contener cadenas de tres caracteres&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;pattern&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;^...$&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="json-schema-format">
<dt><code class="docutils literal notranslate"><span class="pre">format</span></code></dt><dd><p>dispone que la cadena cumple con un formato predefinido
determinado. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;El valor tendrá que ser una fecha con la forma AAAA-MM-DD&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;date&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Los formatos predefinidos se encuentran <a class="reference external" href="https://json-schema.org/draft/2020-12/json-schema-validation.html#name-defined-formats">enumerados en la
especificación</a>.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Prudencia</p>
<p>La especificación nos advierte de este campo sólo tiene valor
informativo y no afecta a la validación, por lo que una cadena que no
cumpla con el formato no tiene por qué producir un error en la
validación.</p>
</div>
</dd>
</dl>
</dd>
</dl>
<dl class="simple" id="json-schema-null">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/null.html">null</a></dt><dd><p>Dado que sólo hay un valor posible, no tiene ninguna propiedad adicional.</p>
</dd>
</dl>
<dl class="simple" id="json-schema-boolean">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/boolean.html">boolean</a></dt><dd><p>Tampoco presenta ninguna propiedad adicional.</p>
</dd>
</dl>
<dl id="json-schema-array">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/array.html">array</a></dt><dd><p>Al no ser la secuencia un valor escalar (a diferencia de todos los
anteriores) su definición es algo más compleja. Las propiedades más sencillas
de entender son:</p>
<span id="json-schema-minitems"></span><dl class="simple" id="json-schema-maxitems">
<dt><code class="docutils literal notranslate"><span class="pre">minItems</span></code>/<code class="docutils literal notranslate"><span class="pre">maxItems</span></code></dt><dd><p>es la cantidad mínima (o máxima) de elementos que debe contener la secuencia.
Por lo tanto, nos sirve para restringir la longitud de la secuencia.</p>
</dd>
</dl>
<dl id="json-schema-uniqueitems">
<dt><code class="docutils literal notranslate"><span class="pre">uniqueItems</span></code></dt><dd><p>fuerza a que no haya dos elementos iguales en la secuencia. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;uniqueItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;minItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span>
<span class="p">}</span>
</pre></div>
</div>
<p>forzaría a que la secuencia contuviera al menos dos elementos y que todos
fueran distintos entre sí.</p>
</dd>
</dl>
<dl id="json-schema-contains">
<dt><code class="docutils literal notranslate"><span class="pre">contains</span></code></dt><dd><p>indica que la secuencia contiene al menos un elemento con las
características del que se indica. Por ejemplo, la secuencia:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span>
   <span class="s2">&quot;contains&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;enum&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">56</span><span class="p">]</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>puede tener todos los elementos que se quiera y del tipo que se quiera,
pero uno al menos debe ser <strong>1</strong>, <strong>34</strong> o <strong>56</strong>.</p>
</dd>
</dl>
<span id="json-schema-mincontains"></span><dl id="json-schema-maxcontains">
<dt><code class="docutils literal notranslate"><span class="pre">minContains</span></code>/<code class="docutils literal notranslate"><span class="pre">maxContains</span></code></dt><dd><p>funcionan en conjunción con <a class="reference internal" href="#json-schema-contains"><span class="std std-ref">contains</span></a> e
indican la cantidad mínima o máxima de elementos que deben cumplir con el
subesquema incluido en él.  Así, en el ejemplo anterior, no se especificó
ninguno de estas dos propiedades, por lo que con que haya un elemento que
cumpla la prescripción de <a class="reference internal" href="#json-schema-contains"><span class="std std-ref">contains</span></a> la
validación tiene éxito. En cambio, si hacemos:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;contains&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;enum&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w"> </span><span class="mi">56</span><span class="p">]</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;minContains&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span>
<span class="p">}</span>
</pre></div>
</div>
<p>tendrá que haber al menos cuatro elementos que cumplan con el esquema de
<a class="reference internal" href="#json-schema-contains"><span class="std std-ref">contains</span></a>.</p>
</dd>
</dl>
<dl id="json-schema-items">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code></dt><dd><p>indica el esquema que deben cumplir <strong>todos</strong> los elementos que
constituyen la secuencia. Por tanto, definida así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>la secuencia sólo podrá contener enteros. Si <code class="docutils literal notranslate"><span class="pre">items</span></code> tiene el valor
<code class="docutils literal notranslate"><span class="pre">false</span></code>, no podrá contener elementos:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Esto valida una secuencia vacía&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="json-schema-prefixitems">
<dt><code class="docutils literal notranslate"><span class="pre">prefixItems</span></code></dt><dd><p>tiene utilidad cuando a diferencia del caso anterior, cada elemento de la
secuencia tiene un esquema diferente:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="nt">&quot;array&quot;</span>
<span class="w">   </span><span class="nt">&quot;prefixItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este ejemplo, el primer elemento debe ser un entero y el segundo una
cadena, aunque la validación también tendrá éxito cuando haya más de dos
elementos (y éstos no están sujetos a ninguna condición) o incluso cuando
haya menos. Todos estas secuencias son válidas:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">[</span><span class="nv">5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;x&quot;</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">[</span><span class="nv">6</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;y&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">true. null</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">[</span><span class="nv">5</span><span class="p p-Indicator">]</span>
<span class="p p-Indicator">[]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Nótese que podríamos  establecer que los elementos fueran
exactamente <strong>2</strong> añadiendo al esquema <a class="reference internal" href="#json-schema-minitems"><span class="std std-ref">minItems</span></a> y <a class="reference internal" href="#json-schema-maxitems"><span class="std std-ref">maxItems</span></a>.</p>
</div>
<p>La razón del nombre de la propiedad (<em>prefixItems</em>) es  que esta propiedad
define el esquema de los elementos anteriores a los definidos por
<a class="reference internal" href="#json-schema-items"><span class="std std-ref">items</span></a>. Por eso, esta definición:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="nt">&quot;array&quot;</span>
<span class="w">   </span><span class="nt">&quot;prefixItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="w">   </span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;const&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>obligaría a que a partir del tercer elemento (si los hubiere, todos fueran
el número <strong>32</strong>).</p>
</dd>
</dl>
</dd>
</dl>
<dl id="json-schema-map">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/object.html">object</a></dt><dd><p>El subesquema que describe un mapa es el que entraña más dificulta. La
propiedad fundamental es:</p>
<dl id="json-schema-properties">
<dt><code class="docutils literal notranslate"><span class="pre">properties</span></code></dt><dd><p>que permite describir las propiedades que pueden encontrarse en el objeto.
Por ejemplo, un mapa con este aspecto:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pedro Martínez Álvarez&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="s2">&quot;Felipe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="s2">&quot;Sonsoles&quot;</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>podríamos definirlo así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como puede apreciarse la claves de <code class="docutils literal notranslate"><span class="pre">properties</span></code> definen las claves del
propio mapa a definir y los valores el subquema que define el nodo valor.
De los nodos que representan las claves, no hay en principio mucho que
definir, puesto que deben ser cadenas, así que no hay esquema para ellos.</p>
</dd>
</dl>
<p>La definición de <code class="docutils literal notranslate"><span class="pre">properties</span></code>, sin embargo, no obliga a que las únicas
claves posibles sean las definidas ni a que aparezcan todas. Para ello,
podemos añadir otras propiedades:</p>
<dl id="json-schema-required">
<dt><code class="docutils literal notranslate"><span class="pre">required</span></code></dt><dd><p>Lista la propiedades que son obligatorias. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Una definición obliga a que el mapa siempre presente la propiedad «<em>nombre</em>».</p>
</dd>
</dl>
<dl id="json-schema-additionalproperties">
<dt><code class="docutils literal notranslate"><span class="pre">additionalProperties</span></code></dt><dd><p>Define el esquema que deben cumplir las propiedades que no han sido
listadas en <a class="reference internal" href="#json-schema-properties"><span class="std std-ref">properties</span></a> (ni
<a class="reference internal" href="#json-schema-patternproperties"><span class="std std-ref">patternProperties</span></a>). Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">],</span>
<span class="hll"><span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">}</span>
</span><span class="p">}</span>
</pre></div>
</div>
<p>provocaría que los valores de las propiedades no definidas expresameente
sólo pudieran ser cadenas. Si el valor, en vez de un subesquema, es
<code class="docutils literal notranslate"><span class="pre">false</span></code>, <strong>no se permitirá ninguna propiedad adicional</strong>.</p>
</dd>
</dl>
<dl id="json-schema-patternproperties">
<dt><code class="docutils literal notranslate"><span class="pre">patternProperties</span></code></dt><dd><p>Funciona como <a class="reference internal" href="#json-schema-properties"><span class="std std-ref">properties</span></a>, pero en vez de
definir propiedades con un nombre concreto, define propiedades cuya clave
cumple con un patron (una <a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/regular_expressions.html">expresión regular</a>).  Por ejemplo, este
esquema:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;concreta&quot;</span><span class="p">:</span><span class="w">  </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;tambienconcreta&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;number&quot;</span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="hll"><span class="w">   </span><span class="nt">&quot;patternProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="w">      </span><span class="nt">&quot;^s-&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
</span><span class="hll"><span class="w">      </span><span class="nt">&quot;^b-&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">}</span>
</span><span class="hll"><span class="w">   </span><span class="p">},</span>
</span><span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>provoca que las claves válidas sean «<em>concreta</em>», «<em>tambienconcreta</em>»,
cualquier clave que empiece por «<em>s-</em>» y cualquier clave que empiece por
«<em>b-</em>».</p>
</dd>
</dl>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">unevaluatedProperties</span></code></dt><dd><p>no entraremos a tratarla extensamente, pero básicamente viene a
complementar a <a class="reference internal" href="#json-schema-additionalproperties"><span class="std std-ref">additionalProperties</span></a>. Esta segunda sólo es afectada por las
propiedades enumeradas dentro de <a class="reference internal" href="#json-schema-properties"><span class="std std-ref">properties</span></a> o a las que se ajustan en los patrones incluidos
en <a class="reference internal" href="#json-schema-patternproperties"><span class="std std-ref">patternProperties</span></a>. En cambio, la
segunda es capaz de comprobar propiedades que se encuentran dentro de
<a class="reference internal" href="#json-schema-condicional"><span class="std std-ref">esquemas condicionales</span></a> o en
<a class="reference internal" href="#json-schema-ref"><span class="std std-ref">esquemas referenciados</span></a>. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nacimiento&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;nacimiento&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;date&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;edad&quot;</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;unevaluatedProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este esquema, <code class="docutils literal notranslate"><span class="pre">edad</span></code> y <code class="docutils literal notranslate"><span class="pre">nacimiento</span></code> están definidos dentro de un
esquema condicional (con <a class="reference internal" href="#json-schema-oneof"><span class="std std-ref">oneOf</span></a>)<a class="footnote-reference brackets" href="#id9" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, por lo
que si usaramos <a class="reference internal" href="#json-schema-additionalproperties"><span class="std std-ref">additionalProperties</span></a>, el documento <abbr title="JavaScript Object Notation">JSON</abbr> sería inválido si
incluyéramos <code class="docutils literal notranslate"><span class="pre">edad</span></code> o <code class="docutils literal notranslate"><span class="pre">nacimiento</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Puede echarle un ojo a la <a class="reference external" href="https://github.com/json-schema-org/json-schema-spec/issues/556">exposición sobre la necesidad de
incluir unevaluatedProperties en la especificación</a>.</p>
</div>
</dd>
</dl>
<p>Además de las anteriores, hay otras también limitantes:</p>
<span id="json-schema-minproperties"></span><dl class="simple" id="json-schema-maxproperties">
<dt><code class="docutils literal notranslate"><span class="pre">minProperties</span></code>/<code class="docutils literal notranslate"><span class="pre">maxProperties</span></code></dt><dd><p>define la cantidad mínima o máxima de propiedades que puede presentar el
objeto.</p>
</dd>
</dl>
<dl id="json-schema-dependentrequired">
<dt><code class="docutils literal notranslate"><span class="pre">dependentRequired</span></code></dt><dd><p>define qué propiedades deben existir en el objeto para que otra pueda
aparecer. Por ejemplo, imaginemos que queremos que <code class="docutils literal notranslate"><span class="pre">casado</span></code> aparezca
sólo si <code class="docutils literal notranslate"><span class="pre">edad</span></code> se incluyo en el mapa (que en principio no es obligatoria).
En ese caso, habría que definir el esquema así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;dependentRequired&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;casado&quot;</span><span class="w"> </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Es decir, cada una de las claves es la propiedad que presenta
dependencias y para cada una de ella, se listan las propiedades
requeridas.</p>
</dd>
</dl>
<dl id="json-schema-dependentschemas">
<dt><code class="docutils literal notranslate"><span class="pre">dependentSchemas</span></code></dt><dd><p>permite definir con más precisión la dependencia, ya que no se limita a
comprobar la existencia, sino también a comprobar  si los valores se
ajustan a un determinado esquema. Por ejemplo, supongamos una sociedad en
la que no se pudiera tener hijos (o al menos que recen legalmente como
reconocidos), si no hay casamiento. En ese caso, la propiedad <code class="docutils literal notranslate"><span class="pre">hijos</span></code> no
sólo depende de que exista <code class="docutils literal notranslate"><span class="pre">casado</span></code>, sino que además ésta tenga un
valor verdadero. Podríamos hacerlo así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;dependentSchemas&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;const&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;casado&quot;</span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="combinacion-de-esquemas">
<h2><span class="section-number">2.2.3. </span>Combinación de esquemas<a class="headerlink" href="#combinacion-de-esquemas" title="Enlace permanente a este encabezado">¶</a></h2>
<p>¿Qué ocurre si el valor del nodo no es exclusivamente de un tipo? Por ejemplo,
un nodo que pueda ser un entero o un booleano. Para ese caso, hay definidos en
<a class="reference external" href="https://json-schema.org/">JSON Schema</a> unos operadores lógicos que permiten combinar distintos esquemas
y que, a causa de la sintaxis, tiene que adoptar la forma de propiedades:</p>
<dl id="json-schema-oneof">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/combining.html#allof">oneOf</a></dt><dd><p>El esquema es válido sólo si uno de los propuestos en la lista es válido. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este caso, el valor puede ser un entero hasta <strong>10</strong> o un valor lógico. La
alternativa no tiene por qué ser únicamente sobre tipos:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;const&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Y ni siquiera tiene abarcar toda la definición del subesquema:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;oneOf&quot;</span><span class="p">:</span><span class="w">  </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este caso, cumplirían con el esquema todos los enteros,  excepto
aquellos comprendidos entre <strong>11</strong> y <strong>19</strong>.</p>
</dd>
</dl>
<dl id="json-schema-anyof">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/combining.html#anyof">anyOf</a></dt><dd><p>La diferencia respecto a <a class="reference internal" href="#json-schema-oneof"><span class="std std-ref">oneOf</span></a> es que basta con
que se cumpla uno, pero no necesariamente uno. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;anyOf&quot;</span><span class="p">:</span><span class="w">  </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;multipleOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>En este caso, serán válidos todos los enteros hasta <strong>10</strong> y cualquier múltiple
de 5. Sin embargo, si hubiéramos construido la combinación con <a class="reference internal" href="#json-schema-oneof"><span class="std std-ref">oneOf</span></a>, <strong>0</strong>, <strong>5</strong> y <strong>10</strong> incumplirían el esquema, porque
cumplen ambas condiciones y sólo puede cumplirse una.</p>
</dd>
</dl>
<dl id="json-schema-allof">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/combining.html#allof">allOf</a></dt><dd><p>Como las dos anterior pero obliga a que se cumplan todos los esquemas
incluidos en la lista. Por tanto:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;allOf&quot;</span><span class="p">:</span><span class="w">  </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;maximum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="nt">&quot;multipleOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">}</span>
<span class="w">   </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>sólo sería válido para <strong>0</strong>, <strong>5</strong> y <strong>10</strong>.</p>
</dd>
</dl>
<dl id="json-schema-not">
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/combining.html#not">not</a></dt><dd><p>Invierte la validez del esquema, es decir, el valor será valido, si el
esquema negado es inválido para el valor. Por ejemplo:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;not&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Cualquier valor será válido siempre que no sea un entero.</p>
</dd>
</dl>
</section>
<section id="referencias">
<span id="json-schema-ref"></span><h2><span class="section-number">2.2.4. </span>Referencias<a class="headerlink" href="#referencias" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Por la naturaleza del formato <abbr title="JavaScript Object Notation">JSON</abbr>, la definición de los subesquemas de los
nodos se va anidando a otros subesquemas en los que se han definido secuencias o
mapas. Ilustrémoslo con un <abbr title="JavaScript Object Notation">JSON</abbr> muy sencillo reciclado de ejemplos anteriores:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Pedro Martínez Álvarez&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Marta Martínez Campoy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Su esquema, a estas alturas, no debería entrañar ninguna dificultad:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gente.schema.json&quot;</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ejemplo de referencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Un porrón de personas dentro de una secuencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre completo de la persona&quot;</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">]</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;uniqueItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como puede apreciarse, el subesquema que describa a la persona está anidado
dentro de la definición de la secuencia, concretamente, en su propiedad
<code class="docutils literal notranslate"><span class="pre">properties</span></code>. Como el esquema completo es sencillo, no hay problemas. Sin
embargo, en esquemas más complejos con varios niveles de anidación, podemos
encontrar dificultades para seguir las definiciones. Por ese motivo, <a class="reference external" href="https://json-schema.org/">JSON
Schema</a> permite incluir referencias a un subesquema y escribir éste
separadamente. También son útiles las referencias cuando un subesquema se repite
en varias partes del documento.</p>
<p>Así pues, partamos la  definición en dos archivos:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;persona.schema.json&quot;</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre completo de la persona&quot;</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>y <code class="file docutils literal notranslate"><span class="pre">persona.schema.json</span></code>:</p>
<div class="highlight-json notranslate" id="id5"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gente.schema.json&quot;</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ejemplo de referencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Un porrón de personas dentro de una secuencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">      </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;URL-donde-puedo-encontrar-persona.schema.json&quot;</span>
</span><span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;uniqueItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Como vemos, <code class="file docutils literal notranslate"><span class="pre">gente.schema.json</span></code> sustituye el subesquema de la persona, por
una simple referencia al archivo <code class="file docutils literal notranslate"><span class="pre">persona.schema.json</span></code> a través de la
propiedad <code class="docutils literal notranslate"><span class="pre">$ref</span></code>. La única dificultad es saber cómo funcionan estas <abbr title="Uniform Resource Locator">URL</abbr>s.</p>
<p>Podemos usar una <abbr title="Uniform Resource Locator">URL</abbr> absoluta (p.e. <a class="reference external" href="https://example.net/schemas/persona.schema.json">https://example.net/schemas/persona.schema.json</a>), en cuyo caso no habrá
problemas, pero si queremos usar una <abbr title="Uniform Resource Locator">URL</abbr> relativa, es necesario profundizar
más.</p>
<p>El primer concepto  a introducir es el de <em class="dfn">URL de recuperación</em>, que es la
<abbr title="Uniform Resource Locator">URL</abbr> de la que toma el validador el archivo con el esquema. Por ejemplo, si ha
tomado el archivo de <a class="reference external" href="https://example.net/schemas/gente.schema.json">https://example.net/schemas/gente.schema.json</a>, esa será la <abbr title="Uniform Resource Locator">URL</abbr> de
recuperación. A partir de ella se define la <em class="dfn">URL base</em>, que es la <abbr title="Uniform Resource Locator">URL</abbr>
descontada la parte correspondiente al archivo. En este caso, la <abbr title="Uniform Resource Locator">URL</abbr> base es
<a class="reference external" href="https://example.net/schemas/">https://example.net/schemas/</a>. Sin embargo, la
<abbr title="Uniform Resource Locator">URL</abbr>  de recuperación puede no estar definida y, por tanto, tampoco la <abbr title="Uniform Resource Locator">URL</abbr>
base. Por ese motivo, existe la propiedad <a class="reference internal" href="#json-schema-id"><span class="std std-ref">$id</span></a> en el nodo
raíz. Si existe, es su valor el que se toma como referencia para calcular la
<abbr title="Uniform Resource Locator">URL</abbr> base.</p>
<p>Así pues, tendríamos varias opciones para escribir la <abbr title="Uniform Resource Locator">URL</abbr> de
<code class="file docutils literal notranslate"><span class="pre">persona.schema.json</span></code> (suponiendo que estuviera ubicando en el mismo lugar
que <code class="file docutils literal notranslate"><span class="pre">gente.schema.json</span></code>):</p>
<ul class="simple">
<li><p><em>Absoluta</em>: <a class="reference external" href="https://example.net/schemas/persona.schema.json">https://example.net/schemas/persona.schema.json</a>.</p></li>
<li><p><em>Absoluta</em> sin máquina ni protocolo: <code class="file docutils literal notranslate"><span class="pre">/schemas/persona.schema.json</span></code>.</p></li>
<li><p><em>Relativa</em>: <code class="file docutils literal notranslate"><span class="pre">persona.schema.json</span></code>.</p>
<div class="admonition caution">
<p class="admonition-title">Prudencia</p>
<p>Con la orden <strong class="command">jsonschema</strong> sugerida, se debe anteponer
<code class="file docutils literal notranslate"><span class="pre">file:</span></code> cuando se usan rutas relativas y los archivos son locales.
Por tanto, <code class="file docutils literal notranslate"><span class="pre">file:persona.schema.json</span></code>.</p>
</div>
</li>
</ul>
<p>Además de todo lo ya referido, es posible hacer referencia a subesquemas
contenidos dentro de un esquema mayor. Por ejemplo,
<code class="file docutils literal notranslate"><span class="pre">persona.schema.json#/properties/nombre</span></code> referiría el subesquema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
   <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Nombre completo de la persona&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p id="json-schema-defs">Esto da pie a recuperar subesquemas de otros archivos, pero también subesquemas
definidos en otra parte del archivo. Con este fin existe la propiedad</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">$defs</span></code></dt><dd><p>Contiene subesquemas con nombre a los que puede hacerse referencia:</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Esquema con referencia interna<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://json-schema.org/draft/2020-12/schema&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;$id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gente.schema.json&quot;</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Ejemplo de referencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Un porrón de personas dentro de una secuencia&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#$defs/persona&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;uniqueItems&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>

<span class="w">   </span><span class="nt">&quot;$defs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;persona&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Nombre completo de la persona&quot;</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;minimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">},</span>
<span class="w">         </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">]</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</details></dd>
</dl>
</section>
<section id="esquemas-condicionales">
<span id="json-schema-condicional"></span><h2><span class="section-number">2.2.5. </span>Esquemas condicionales<a class="headerlink" href="#esquemas-condicionales" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Un <em class="dfn">esquema condicional</em> es aquel cuyas características dependen de que se
cumplan uno o varios requisitos. Por ejemplo, que una propiedad sea obligatoria
sólo si se presenta otra. Ya hemos visto dos propiedades que crean esquemas
condicionales: <a class="reference internal" href="#json-schema-dependentrequired"><span class="std std-ref">dependentRequired</span></a> y
<a class="reference internal" href="#json-schema-dependentschemas"><span class="std std-ref">dependentSchemas</span></a>. Pero hay otro modo de
crearlos:</p>
<dl>
<dt><a class="reference external" href="https://json-schema.org/understanding-json-schema/reference/conditionals.html#if-then-else">if/then/else</a></dt><dd><p>Estas propiedades funcionen de forma semejante a como lo hace la estructura
condicional en los lenguajes de programación:</p>
<ol class="arabic simple">
<li><p>El valor <code class="docutils literal notranslate"><span class="pre">if</span></code> es un esquema que se evalúa.</p></li>
<li><p>Si resulta verdadero, se evalúa el esquema de <code class="docutils literal notranslate"><span class="pre">then</span></code>, que debe
resultar verdadero.</p></li>
<li><p>Si resulta falso, se evalúa en caso de existir el esquema de <code class="docutils literal notranslate"><span class="pre">else</span></code>, que
debe resultar verdadero.</p></li>
</ol>
<p>Por ejemplo, el mismo caso que resolvimos con <a class="reference internal" href="#json-schema-dependentschemas"><span class="std std-ref">dependentSchemas</span></a>, podemos resolverlo así:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;nombre&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;edad&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;exclusiveMinimum&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;default&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">},</span>
<span class="w">      </span><span class="nt">&quot;hijos&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<span class="w">         </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;nombre&quot;</span><span class="p">],</span>
<span class="w">   </span><span class="nt">&quot;additionalProperties&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="hll"><span class="w">   </span><span class="nt">&quot;if&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hijos&quot;</span><span class="p">]</span>
</span><span class="hll"><span class="w">   </span><span class="p">},</span>
</span><span class="hll"><span class="w">   </span><span class="nt">&quot;then&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="w">         </span><span class="nt">&quot;casado&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;const&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span>
</span><span class="hll"><span class="w">      </span><span class="p">},</span>
</span><span class="hll"><span class="w">      </span><span class="nt">&quot;required&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;casado&quot;</span><span class="p">]</span>
</span><span class="hll"><span class="w">   </span><span class="p">}</span>
</span><span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Puede probar a rescribir con estas propiedades los requisitos de presencia de
<code class="docutils literal notranslate"><span class="pre">casillero</span></code>, <code class="docutils literal notranslate"><span class="pre">departamento</span></code> y <code class="docutils literal notranslate"><span class="pre">sustituye</span></code> del <a class="reference internal" href="#json-schema-ejemplo"><span class="std std-ref">ejemplo inicial</span></a>.</p>
</div>
</dd>
</dl>
</section>
<section id="ejercicios-resueltos">
<h2><span class="section-number">2.2.6. </span>Ejercicios resueltos<a class="headerlink" href="#ejercicios-resueltos" title="Enlace permanente a este encabezado">¶</a></h2>
<div class="admonition-todo admonition" id="id7">
<p class="admonition-title">Por hacer</p>
<p>Resolver los <a class="reference internal" href="../01.intro/02a.serial.html#yaml-resueltos"><span class="std std-ref">ejercicios de recetas y cadena</span></a>.</p>
</div>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">1</a><span class="fn-bracket">]</span></span>
<p>Aunque los nodos clave (o sea, los nodos que constituyen las claves de un
objeto), es forzoso que sean cadenas, así que en principio no hay que
describir cómo son, sino expresar simplemente qué palabras contienen.</p>
</aside>
<aside class="footnote brackets" id="id9" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">2</a><span class="fn-bracket">]</span></span>
<p>En realidad, podríamos haber definido <code class="docutils literal notranslate"><span class="pre">edad</span></code> y <code class="docutils literal notranslate"><span class="pre">nacimiento</span></code> en
<code class="docutils literal notranslate"><span class="pre">properties</span></code> y no necesitaríamos recurrir a <code class="docutils literal notranslate"><span class="pre">unevaluatedProperties</span></code>.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html" title="index">
          <img class="logo" src="../_static/logo.png" alt="Logo"/>
        </a></p><div class="sphinx-toc sphinxlocaltoc">
    <h3><a href="../index.html">Page contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.2. <abbr title="JavaScript Object Notation">JSON</abbr> Schema</a><ul>
<li><a class="reference internal" href="#preliminares">2.2.1. Preliminares</a><ul>
<li><a class="reference internal" href="#ejemplo">2.2.1.1. Ejemplo</a></li>
<li><a class="reference internal" href="#validacion">2.2.1.2. Validación</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sintaxis-basica">2.2.2. Sintaxis básica</a><ul>
<li><a class="reference internal" href="#esquema-del-nodo-raiz">2.2.2.1. Esquema del nodo raíz</a></li>
<li><a class="reference internal" href="#subesquemas-de-nodo">2.2.2.2. Subesquemas de nodo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combinacion-de-esquemas">2.2.3. Combinación de esquemas</a></li>
<li><a class="reference internal" href="#referencias">2.2.4. Referencias</a></li>
<li><a class="reference internal" href="#esquemas-condicionales">2.2.5. Esquemas condicionales</a></li>
<li><a class="reference internal" href="#ejercicios-resueltos">2.2.6. Ejercicios resueltos</a></li>
</ul>
</li>
</ul>

  </div>
  <div class="sphinxprev">
    <h4>Previous page</h4>
    <p class="topless"><a href="01.dtdxml.html"
                          title="Previous page">&larr; <span class="section-number">2.1. </span><abbr title="Document Type Definition">DTD</abbr></a></p>
  </div>
  <div class="sphinxnext">
    <h4>Next page</h4>
    <p class="topless"><a href="03.ej.html"
                          title="Next page">&rarr; <span class="section-number">2.3. </span>Ejercicios propuestos</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/02.validacion/02.yaml.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="03.ej.html" title="2.3. Ejercicios propuestos"
             >siguiente</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="01.dtdxml.html" title="2.1. DTD"
             >anterior</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">documentación de Lenguajes de Marcas - rolling</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">2. </span>Validación</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.2. </span><abbr title="JavaScript Object Notation">JSON</abbr> Schema</a></li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2023-2023, José Miguel Sánchez Alés.
      Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>